{
  "id": "multi_shift",
  "description": "Two-shift pattern: 06:00-14:00, 14:00-22:00 (16h working per day, Mon-Fri)",
  "epoch": "2025-01-06T00:00:00",
  "horizon": {
    "start": "2025-01-06T00:00:00",
    "end": "2025-01-13T00:00:00"
  },
  "calendar": {
    "rules": {
      "0": [["06:00", "14:00"], ["14:00", "22:00"]],
      "1": [["06:00", "14:00"], ["14:00", "22:00"]],
      "2": [["06:00", "14:00"], ["14:00", "22:00"]],
      "3": [["06:00", "14:00"], ["14:00", "22:00"]],
      "4": [["06:00", "14:00"], ["14:00", "22:00"]]
    },
    "exceptions": {}
  },
  "tests": {
    "forward_walk": [
      {
        "id": "within_shift",
        "start": "2025-01-06T06:00:00",
        "minutes": 120,
        "expected": "2025-01-06T08:00:00"
      },
      {
        "id": "across_shifts",
        "start": "2025-01-06T13:00:00",
        "minutes": 120,
        "expected": "2025-01-06T15:00:00",
        "notes": "Shifts are contiguous, so 13:00+120 = 15:00"
      },
      {
        "id": "across_gap",
        "start": "2025-01-06T21:00:00",
        "minutes": 120,
        "expected": "2025-01-07T07:00:00",
        "notes": "Mon 21:00+120: 60min Mon 21-22 + gap + 60min Tue 06-07"
      }
    ],
    "working_minutes": [
      {
        "id": "full_day",
        "start": "2025-01-06T00:00:00",
        "end": "2025-01-07T00:00:00",
        "expected": 960,
        "notes": "16h = 960 min per working day"
      },
      {
        "id": "full_week",
        "start": "2025-01-06T00:00:00",
        "end": "2025-01-13T00:00:00",
        "expected": 4800,
        "notes": "5 days x 960 = 4800 min per week"
      },
      {
        "id": "weekend",
        "start": "2025-01-11T00:00:00",
        "end": "2025-01-13T00:00:00",
        "expected": 0,
        "notes": "No rules for Sat/Sun"
      }
    ],
    "allocations": [
      {
        "id": "within_shift",
        "operation_id": "OP-1",
        "earliest_start": 360,
        "work_units": 120,
        "allow_split": false,
        "expected_start": 360,
        "expected_finish": 480,
        "expected_spans": [[360, 480]],
        "notes": "Mon 06:00 + 120min = Mon 08:00"
      },
      {
        "id": "across_gap",
        "operation_id": "OP-2",
        "earliest_start": 1260,
        "work_units": 120,
        "allow_split": true,
        "expected_start": 1260,
        "expected_work_units": 120,
        "expected_span_count": 2,
        "notes": "Mon 21:00 + 120min splittable: Mon 21-22 (60) + Tue 06-07 (60)"
      }
    ]
  }
}
